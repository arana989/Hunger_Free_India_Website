var _i_=this._i_||function(){},_r_=this._r_||function(e){return e};_i_("a9a:2891de1d"),B.define("hotel/utils/rooms-selected-copy",function(e){return _i_("a9a:861b63ef"),_r_(function(e,t){_i_("a9a:1c61f9f3");var o,a="<strong>"+t+"</strong>";switch(1<e.length?"0":e[0]||"0"){case"29":o="hp_book_now_summary_holidayhomes";break;case"31":o="hp_book_now_summary_villas";break;case"1":o="hp_book_now_summary_apartments";break;case"28":o="hp_book_now_summary_chalet";break;case"27":o="hp_book_now_summary_bungalow";break;case"26":o="hp_book_now_summary_dorm_beds";break;case"33":o="hp_book_now_summary_alt"}return _r_(o?B.jstmpl.translations(o,t,{b_count:a}):B.jstmpl.translations("hp_book_now_summary_room",t,{number_rooms:a}))})}),B.define("hotel/utils/rooms-selected-copy-us",function(e){return _i_("a9a:2a483aef"),_r_(function(e,t,o,a,r){_i_("a9a:99acef55");var n,_,i=t+"";switch(1<e.length?"0":e[0]||"0"){case"29":n="pd_rb_rt_us_exp_num_holiday_homes";break;case"31":n="pd_rb_rt_us_exp_num_villas";break;case"1":n="pd_rb_rt_us_exp_num_apartments";break;case"28":n="pd_rb_rt_us_exp_num_chalets";break;case"27":n="pd_rb_rt_us_exp_num_bungalows";break;case"26":n="pd_rb_rt_us_exp_num_dorm_beds"}_=n?B.jstmpl.translations(n,t,{b_count:i}):B.jstmpl.translations("pd_rb_rt_us_exp_num_rooms",t,{num:i});var s=B.jstmpl.translations("pd_rb_rt_us_exp_num_nights",o,{num:o}),l=B.jstmpl.translations("pd_rb_rt_us_exp_num_adults",a,{num:a});if(r){var c=B.jstmpl.translations("pd_rb_rt_us_exp_num_children",r,{num:r});return _r_(B.jstmpl.translations("pd_rb_rt_us_exp_num_nights_adults_children_rooms",null,{pd_rb_rt_us_exp_num_nights:s,pd_rb_rt_us_exp_num_adults:l,pd_rb_rt_us_exp_num_children:c,pd_rb_rt_us_exp_num_rooms:_}))}return _r_(B.jstmpl.translations("pd_rb_rt_us_exp_num_nights_adults_rooms",null,{pd_rb_rt_us_exp_num_nights:s,pd_rb_rt_us_exp_num_adults:l,pd_rb_rt_us_exp_num_rooms:_}))})}),B.define("component/hotel/new-rooms-table/cheapest-seen-block",function(e,t,o){_i_("a9a:118af289");var r=e("jquery"),a=e("component"),n=B.require("search-config");function _(o,e){if(_i_("a9a:3eb493ef"),n.isGroupSearch)return _r_();var t=[B.env.b_ufi,B.env.b_checkin_date,B.env.b_checkout_date,+n.adults].join("_"),a={method:"GET",dataType:"json",url:"/is_cheapest",data:{hotel_id:B.env.b_hotel_id,search_key:t}};r.ajax(a).done(function(e){var t;_i_("a9a:24519ca5"),!e.b_first&&e.is_the_cheapest?((t=o.closest("tr").prev()).find(".hprt-table-cell-price").addClass("hprt-table-cheapest-block-arrow"),o.addClass("hprt-table-cheapest-block-banner-active"),o.closest("tr.js-hprt-cheapest-block-row").addClass("hprt-cheapest-block-row-active"),t.is(".js-hprt-table-cheapest-block")&&t.addClass("hprt-table-cheapest-block-active")):((t=o.closest("tr").prev()).find(".hprt-table-cell-price").removeClass("hprt-table-cheapest-block-arrow"),o.removeClass("hprt-table-cheapest-block-banner-active"),o.closest("tr.js-hprt-cheapest-block-row").removeClass("hprt-cheapest-block-row-active"),t.is(".js-hprt-table-cheapest-block")&&t.removeClass("hprt-table-cheapest-block-active")),_r_()}),_r_()}o.exports=a.extend({init:function(){_i_("a9a:1356e94d");var e=this.$el;_(e),r(window).bind("focus",function(){_i_("a9a:fb03e730"),_(e),_r_()}),_r_()}}),_r_()}),B.define("component/hotel/new-rooms-table/lightbox",function(e,t,o){_i_("a9a:d98ed090");var a=e("component"),c=e("et"),d=e("jquery"),i=e("lightbox"),h=e("events"),u=B.require("ga-tracker"),b=e("hotel/rooms_table/lightbox/gallery"),s=e("querystring"),l=e("server-data"),r={},n=0,p=!1,_=!1,m=!1,f=!1,v={};function g(e){if(_i_("a9a:42b1771b"),(!_||!m||!f)&&e.data("room-id")){var t="RD"+e.data("room-id");r[t]?r[t]+=1:(r[t]=1,n+=1,_||(c.goal("hp_rt_roomtype_lightbox_opened"),_=!0)),!m&&1<r[t]&&(c.goal("hp_lightbox_opened_more_than_once"),m=!0),!f&&1<n&&(c.goal("hp_lightbox_opened_for_different_rooms"),f=!0)}_r_()}function k(t,e){_i_("a9a:ea7590b6");var a,o={customWrapperClassName:"hprt-lightbox--wrapper hprt-lightbox--two_column_layout hprt-lightbox--wrapperwider",bOverflowVisible:!0,position:"dynamic",hideCallBack:(a=t,_i_("a9a:42fc8c66"),_r_(function(){_i_("a9a:f1956745");var e=a.data("room-id"),t=d("[name=RD"+e+"]").parents(".hprt-table-cell").first();if(!B.feature||!B.feature.transition||!B.env.b_has_maxotel_rooms)return _r_();if(!t.length)return _r_();var o=a.data("LightboxGallery");o&&o.pauseSlick&&o.pauseSlick(),u.trackEvent(u.hotelPageTracker,"Hotel: Lightbox closed","Click on close button"),location.hash="_",_r_()})),trapFocus:!0};i.show(t,o);var r=t.data("room-id"),n="room_"+r;location.hash=n;var _=t.find('[data-component="room-lightbox-async"]');_.data("RoomLightboxEventsBinded")||(_.data("RoomLightboxEventsBinded",!0),B.events.on(B.hotel.Events.RT.LIGHTBOX_LOADED_ASYNC,function(e){_i_("a9a:eede5d9b"),r==e.roomId&&e.success&&(y(t),i.rePosition(),setTimeout(function(){_i_("a9a:e05bf8ef"),i.rePosition(),_r_()},250)),_r_()})),_.length?_.first().component("room-lightbox-async").load():y(t),_r_()}function y(e){_i_("a9a:a6fccb98");var t=e.data("room-id"),o=e.find(".hprt-lightbox-gallery-container");if(o.length&&!o.hasClass("slicked")){o.addClass("slicked");var a=new b(o);e.data("LightboxGallery",a),o.find('[data-gallery=""]').one("click.tracking",function(){_i_("a9a:e62b85de"),c.goal("hp_lb_gallery_clicks_photo"),_r_()});var r=o.find(".hp-gallery-control");r.on("click.tracking",function(e){_i_("a9a:67de6dcb"),e.hasOwnProperty("originalEvent")&&(c.goal("hp_lb_gallery_clicks_arrows"),r.off("click.tracking")),_r_()}),o.find("a.js-hotel-thumb").one("mouseenter.tracking click.tracking",function(){_i_("a9a:ccce1eb9"),c.goal("hp_lb_gallery_used_thumbs"),_r_()}),g(e)}else(a=e.data("LightboxGallery"))&&a.playSlick&&a.playSlick(),o.length&&g(e);var n=e.find(".inline-feedback_lightbox");if(n.length){var _=0<e.find(".b-button_primary").length,i=parseInt(n.data("opened_count"));i?i+=1:i=1,n.data("opened_count",i),(2<i||!_)&&n.removeClass("g-hidden")}h.off("feedbackInline:close_lightbox").on("feedbackInline:close_lightbox",C),h.trigger(B.hotel.Events.RT.LIGHTBOX_OPEN_NEW,t,e);var s=d('a.hprt-roomtype-link[href="#RD'+t+'"]');if(0<s.length){var l=s.data("room-name");l&&u.trackEvent(u.hotelPageTracker,"Hotel: Lightbox opened",l)}setTimeout(function(){_i_("a9a:4c6707db");try{if("undefined"!=typeof window&&"function"==typeof window.dispatchEvent&&"undefined"!=typeof document&&"function"==typeof document.createEvent){var e=document.createEvent("CustomEvent");e.initEvent("scroll",!1,!1),window.dispatchEvent(e)}}catch(e){}_r_()},100),p||isNaN(t)||(p=!0,c.track("ZdZbaTaTaBBUcJPQfQAYbAPNOSTUWe")&&(p=!1,c.customGoal("ZdZbaTaTaBBUcJPQfQAYbAPNOSTUWe",2)),d.ajax({method:"POST",dataType:"json",url:"/hotel_lightbox_opened",data:{hotel_id:B.env.b_hotel_id,room_id:t}})),_r_()}function C(){_i_("a9a:4fb8ca4d"),i.hide(),_r_()}o.exports=a.extend({init:function(e){_i_("a9a:4b8f516b");var t=this.$el,o=t.data("room-id");setTimeout(function(){_i_("a9a:e2ea9c6a"),function(e){_i_("a9a:c71d4121");var t=e.data("room-id"),o=s.parseUrl(location.href).query.activeTab;if(1==location.hash.indexOf("room")&&(o=location.hash.slice(1)),!o)return _r_();var a=o.match(/room_([0-9]*)_?.*/);if(!a||a.length<2||!a[1])return _r_();t==a[1]&&k(e),_r_()}(t),_r_()},500);var a=d('.hprt-roomtype-link[data-room-id="'+o+'"]');if(!a.length)return _r_();a.click(function(e){_i_("a9a:859c78dd"),e.preventDefault(),l&&l.b_room_comparison_tracking_data&&l.b_room_comparison_tracking_data.first_room_id===o&&c.goalWithValue("js_rt_comparison_first_room_page_opened_total",1),l&&l.b_room_comparison_tracking_data&&l.b_room_comparison_tracking_data.second_room_id===o&&c.goalWithValue("js_rt_comparison_second_room_page_opened_total",1),v[o]?c.customGoal("ZdfbTZCCQJBHVPSDDKe",4):0<Object.keys(v).length&&c.customGoal("ZdfbTZCCQJBHVPSDDKe",5),v[o]=1,k(t),_r_()});var r=d(".gr-toggle-room-lightbox");if(r.length)for(var n=0;n<r.length;n++)a.attr("href")===d(r[n]).attr("href")&&d(r[n]).bind("click",function(e){_i_("a9a:b20c48b2"),e.preventDefault(),k(t),_r_()});var _=d(".main-gallery-toggle-room-lightbox");if(_.length)for(n=0;n<_.length;n++)a.data("roomId")===d(_[n]).data("roomId")&&d(_[n]).bind("click",function(e){_i_("a9a:7d6ceceb"),e.preventDefault(),k(t,d(this).data("isGroupRecommendation")),_r_()});_r_()},show:k}),_r_()}),B.define("component/hotel/new-rooms-table/summary/best-price",function(e,t,o){_i_("a9a:c3444c52");var a=e("component"),r=e("hotel/store"),n=e("jstmpl"),_=/^bbasic_/i,i=e("et");o.exports=a.extend({init:function(){_i_("a9a:8879f9c7"),r.subscribe(function(){if(_i_("a9a:f787ecd1"),i.track_experiment("d_pd_hp_rt_remove_jackpot_step3"))return _r_();var e=r.getState().roomsTable.js_selection,t=$(".hp_rt_attr_msg");1==B.env.b_is_group_search?2==e.fitStatus?this.toggleJackpotMessage(e,t):this.$el.hide():this.toggleJackpotMessage(e,t),_r_()}.bind(this)),_r_()},toggleJackpotMessage:function(e,t){_i_("a9a:b47aa7ec");var o=_.test(e.blockIDs[0]||"");if(1!=e.roomCount||2!=e.blocks[e.blockIDs[0]].b_stay_prices.length||o)0<e.roomCount?(this.$el.text(B.jstmpl.translations("hp_rt_jackpot_best_price")),this.$el.show(),t.length&&t.show()):(this.$el.hide(),this.$el.text(""),t.length&&t.hide());else{var a="",r=e.roomTypes[0];-1!==["1","29","31","17","19","26"].indexOf(r)?(a="1"===r?n.translations("pss_rt_jackpot_last_room_dehotelise_apt"):"29"===r?n.translations("pss_rt_jackpot_last_room_dehotelise_hh"):"31"===r?n.translations("pss_rt_jackpot_last_room_dehotelise_villa"):n.translations("pss_rt_jackpot_last_room_dehotelise_option"),this.$el.text(a)):this.$el.text(B.jstmpl.translations("hp_rt_jackpot_last_room")),this.$el.show(),t.length&&t.show()}_r_()}}),_r_()}),B.define("component/hotel/new-rooms-table/summary/no-free-cancellation",function(e,t,o){_i_("a9a:f356b893");var a=e("component"),i=e("hotel/store");o.exports=a.extend({init:function(){_i_("a9a:60e1bc34"),i.subscribe(function(){_i_("a9a:9b0b864c");var o=i.getState().roomsTable.js_selection,e=o.blockIDs.reduce(function(e,t){return _i_("a9a:4b0072e8"),"non_refundable"===o.blocks[t].b_cancellation_type?_r_(e+1):_r_(e)},0),t=$(".js-hprt__booking-summary__non-free-wrapper"),a=o.blockIDs.reduce(function(e,t){return _i_("a9a:76b7c3bd"),"special_condition"===o.blocks[t].b_cancellation_type?_r_(e+1):_r_(e)},0);if(0<e||0<a){var r=B.jstmpl.translations("bhep_pp_droom_no_free_cancellation_warning_body"),n=B.jstmpl.translations("bhep_pp_droom_no_free_cancellation_warning_body_many_non_free_with_free"),_=B.jstmpl.translations("bhep_pp_droom_no_free_cancellation_warning_body_many_non_free");t.removeClass("g-hidden"),1===o.roomCount?this.$el.html(r):o.blockIDs.length-e-a!=0?this.$el.html(n):this.$el.html(_),$(".continue_header").removeClass("g-hidden"),this.$el.removeClass("g-hidden")}else $(".continue_header").addClass("g-hidden"),this.$el.addClass("g-hidden"),t.addClass("g-hidden");_r_()}.bind(this)),_r_()}}),_r_()}),B.define("component/hotel/new-rooms-table/summary/conditions",function(e,t,o){_i_("a9a:6f2b8633");var a=e("component"),n=e("hotel/store"),_=/^bbasic_/i;o.exports=a.extend({init:function(){_i_("a9a:04023c29"),n.subscribe(function(){_i_("a9a:703993be");var e=n.getState().roomsTable.js_selection,t=e.blockIDs[0]||"";if(1!==e.roomCount||e.blocks[t].b_is_fflex_price_point||_.test(t))this.$el.empty();else{var o=$('tr[data-block-id="'+t+'"]').find(".hprt-conditions-bui").eq(0),a=e.blocks[t].b_genius_free_room_upgrade,r=this.generateConditionsEl(o,a);this.$el.empty().append(r),window.BUI&&window.BUI.initComponents&&window.BUI.initComponents(this.$el.get(0))}_r_()}.bind(this)),_r_()},generateConditionsEl:function(e,t){_i_("a9a:60502202");var o=e.clone();o.removeClass("hprt-conditions").addClass("hprt-conditions-summary"),o.find(".jq_tooltip").removeClass("jq_tooltip").removeAttr("data-title title"),o.find(".green_condition").removeClass("green_condition"),o.find(".hprt-green-condition").removeClass("hprt-green-condition"),o.find(".ungreen-condition-green").removeClass("ungreen-condition-green"),o.find(".hprt-item--emphasised").removeClass("hprt-item--emphasised"),o.find(".hprt-checkmark-condition").removeClass("hprt-checkmark-condition"),o.find(".hprt-special-condition").removeClass("hprt-special-condition"),o.find("svg.hprt-nocc-icon").attr("fill","#383838"),o.find(".bui-text--color-constructive").removeClass("bui-text--color-constructive"),o.find("svg.bk-icon").attr("fill","#262626"),t&&o.find(".room-upgrade-condition").removeClass("u-hidden");var a=$("<strong>"+B.jstmpl.translations("bp_res_column_details")+"</strong>");return _r_([a,o])}}),_r_()}),B.define("component/hotel/new-rooms-table/reservation-cta",function(e,t,o){_i_("a9a:6ea03f65");var a=e("component"),_=e("hotel/store"),i=e("server-data");o.exports=a.extend({init:function(){_i_("a9a:c3647e1e");var r=this.$el.find(".js-reservation-button"),e=r.find(".js-reservation-button__text"),n=e.length?e:r;_.subscribe(function(){_i_("a9a:7bf870d3");var e=_.getState().roomsTable,t=e.js_selection,o=t.blockIDs.some(function(e){return _i_("a9a:619f830f"),_r_(t.blocks[e].b_rate_is_genius)});e.formIsSuccessfullySubmitted?r.addClass("bui-is-loading").prop("disabled",!0):r.removeClass("bui-is-loading").prop("disabled",!1);var a=t.blockIDs.filter(function(e){return _i_("a9a:1ab254b5"),_r_(t.blocks[e].b_genius_free_room_upgrade)});t.blockIDs.some(function(e){return _i_("a9a:442891d5"),_r_(t.blocks[e].b_rate_is_cug_business_rate)})&&t.blockIDs.length<2&&(o=!1),i.fe_is_an_rtb_property?n.html(B.jstmpl.translations("web_rtb_rt_request_cta")):a.length&&a.length===t.blockIDs.length?n.html(B.jstmpl.translations("genius_free_room_upgrade_rt_cta")):o?n.html(B.jstmpl.translations("ge_deepen_rt_book_genius_cta")):n.html(B.jstmpl.translations("hp_rt_book_button_reserve")),_r_()}.bind(this)),_r_()}}),_r_()}),B.define("component/hotel/new-rooms-table/summary/dont-worry",function(e,t,o){_i_("a9a:70e9a9fd");var a=e("component");o.exports=a.extend({init:function(){if(_i_("a9a:e187fbe1"),this.$el.data("alwaysVisible"))return this.$el.text(B.jstmpl.translations("bp_dont_worry_message")),_r_();var o=e("hotel/store");o.subscribe(function(){_i_("a9a:202db018");var t=o.getState().roomsTable.js_selection,e=t.blockIDs.every(function(e){return _i_("a9a:152e49a4"),_r_(t.blocks[e].b_book_now_pay_later)});0<t.roomCount&&e?this.$el.text(B.jstmpl.translations("bp_dont_worry_message")):this.$el.text(""),_r_()}.bind(this)),_r_()}}),_r_()}),B.define("component/hotel/new-rooms-table/summary/fade",function(e,t,o){_i_("a9a:6a3dab13");var n=e("server-data"),_=e("jquery"),a=e("component"),i=e("hotel/store"),s="hprt-block--genius-room-selected",l="hprt-block--room-selected";o.exports=a.extend({init:function(){_i_("a9a:e8209eae"),i.subscribe(function(){_i_("a9a:30e74349");var t=i.getState().roomsTable.js_selection;this.$el.removeClass(l),this.$el.removeClass(s),0<t.roomCount&&(t.blockIDs.some(function(e){return _i_("a9a:e11750d1"),_r_(1===t.blocks[e].b_rate_is_genius)})&&1===parseInt(n.brand_selected_rooms_genius)?this.$el.addClass(s):this.$el.addClass(l));var e=".roomType--highlight",o=_(".hprt-table").find(".hprt-table-cell.-first");if(o.length&&o.filter(e).length){var a=o.filter(e).find("[name^=RD]");if(a&&a.length&&t.roomIDs&&t.roomIDs.length){var r=a.attr("name").replace("RD","");r&&-1==t.roomIDs.indexOf(r)&&o.removeClass("roomType--highlight hprt-table-cell-roomtype--active")}}_r_()}.bind(this)),_r_()}}),_r_()}),booking.jstmpl("template_reserve_button_tooltip",function(){_i_("a9a:517e5219");var _,i=["\n    <div class='big_tooltip_x'>\n        <h1>","</h1>\n\n        <p>\n            <strong>\n                ","\n                    ",", ","\n                ","\n            </strong>\n            <br />\n        </p>\n\n        <hr/>\n\n        <p>\n            <strong>"," \n                    ","/private/bh_bp_dates_num_weeks/name","/private/bp_dates_num_nights_1/name","","</strong><br />\n        </p>\n\n        <p>\n            ","/private/check_in/name",": </span>","\n        </p>\n\n        <p>\n            ","/private/check_out/name","\n        </p>\n    </div>\n\n    \n    ","\n\n    ",'\n        <div class="big_tooltip_message">\n            ',"/private/genius_free_room_upgrade_rt_applied/name","\n            ","/private/rtb_pp_persuasion_aria_yellow_block/name","/private/ge_boost_hp_rt_reserve_button_hover_nongenius/name","/private/hp_rt_reserve_hover_no_account_2_minutes/name","\n        </div>\n    ","\n        ",'\n            <div class="big_tooltip_message big_tooltip_message__green pay_later">\n                ',"/private/hp_rt_pay_at_property/name","\n            </div>\n        ","\n    ","\n\n"],s=["b_hotel_name","b_room_details","b_name","b_interval_in_weeks","b_interval","b_checkin_localized_date_with_weekday","b_checkout_localized_date_with_weekday","b_only_genius_room_upgrade_selected","b_show_great_choice_message","b_user_auth_level","fe_is_an_rtb_property","fe_show_tooltip_persuasion_block","b_all_rooms_have_pay_later","b_is_lightbox"];return _r_(function(e){_i_("a9a:f30c7fcc");var t="",o=this.fn;t+=[i[0],o.F.html(o.MC(s[0])),i[1]].join("");var a=o.MC(s[1])||[];e.unshift(null);for(var r=1,n=a.length;r<=n;r++)e[0]=a[r-1],t+=[i[2],o.F.html(o.MC(s[2]))].join(""),o.MJ(r==a.length)||(t+=i[3]),t+=i[4];return e.shift(),t+=i[5],o.MD(s[3])?t+=[i[6],(e.unshift({num_weeks:o.MC(s[3])}),_=o.ME(i[7],o.MB,o.MN,o.MO(o.MC(s[3]),null,i[7])),e.shift(),_),i[4]].join(""):t+=[i[2],(e.unshift({num_nights:o.MC(s[4])}),_=o.ME(i[8],o.MB,o.MN,o.MO(o.MC(s[4]),null,i[8])),e.shift(),_),i[9]].join(""),t+=[i[10],o.ME(i[11],o.MB,o.MN,null),i[12],o.MC(s[5]),i[13],o.ME(i[14],o.MB,o.MN,null),i[12],o.MC(s[6]),i[15]].join(""),o.MN("fe_show_tooltip_persuasion_block",o.MC(s[7])&&o.MC(s[8])||o.MC(s[9])&&o.MC(s[8])||o.MK(o.MC(s[7])||o.MC(s[9]))),t+=i[16],o.MD(s[11])&&(t+=i[17],o.MD(s[7])?(t+=i[4],o.MD(s[8])&&(t+=[i[2],o.ME(i[18],o.MB,o.MN,null),i[4]].join("")),t+=i[19]):o.MD(s[10])?t+=[i[4],o.ME(i[20],o.MB,o.MN,null),i[19]].join(""):(o.MD(s[9])?(t+=i[4],o.MD(s[8])&&(t+=[i[2],o.ME(i[21],o.MB,o.MN,null),i[4]].join(""))):(t+=i[4],o.MJ(o.track_experiment("dDfPJeaILYDCMMWZNKdPYOWdDC"))?t+=[i[2],o.ME(i[21],o.MB,o.MN,null),i[4]].join(""):t+=[i[2],o.ME(i[22],o.MB,o.MN,null),i[4]].join("")),t+=i[19]),t+=i[23]),t+=i[16],o.MK(o.MC(s[13]))&&(t+=i[24],o.MD(s[12])&&(t+=[i[25],o.ME(i[26],o.MB,o.MN,null),i[27]].join("")),t+=i[28]),t+=i[29],_r_(t)})}()),B.define("hotel/rooms-table/reserve-button-tooltip",function(e){_i_("a9a:c2923bb0");var t=e("jquery"),i=e("hotel/store"),s=t(".js-reservation-button"),l=s.attr("data-title"),c=B.jstmpl("template_reserve_button_tooltip"),d={};i.subscribe(function(){_i_("a9a:93932bc8");var t=i.getState().roomsTable.js_selection,e=t.roomIDs.map(function(e){return _i_("a9a:1285ba3b"),_r_(t.rooms[e])}),o=t.blockIDs.filter(function(e){return _i_("a9a:434aeffc"),_r_(t.blocks[e].b_genius_free_room_upgrade)}),a=o.length&&o.length===t.blockIDs.length;s.removeAttr("id").removeAttr("data-tooltip-class"),s.removeData("materialized-id");var r=t.fitStatus,n=Boolean(0===r&&1===Number(B.env.fe_show_fam_d_hp_rt_great_choice_no_fit_blackout));if(0<t.roomCount){d={b_hotel_name:B.env.b_hotel_name,b_interval:B.env.b_checkin_checkout_interval,b_interval_in_weeks:B.env.b_checkin_checkout_interval_in_weeks,b_checkin_localized_date_with_weekday:B.formatter.date(B.env.b_checkin_date,"date_with_weekday"),b_checkout_localized_date_with_weekday:B.formatter.date(B.env.b_checkout_date,"date_with_weekday"),b_check_in_time_translated:B.env.b_check_in_time_translated,b_check_out_time_translated:B.env.b_check_out_time_translated,b_room_details:e,b_user_auth_level:B.env.auth_level,b_only_genius_room_upgrade_selected:a,b_show_great_choice_message:!n,fe_is_an_rtb_property:B.env.fe_is_an_rtb_property};var _=c.render(d);s.attr("data-title",_).attr("data-tooltip-class","submit_holder_button_tooltip")}else d={},s.attr("data-title",l);_r_()}),_r_()}),B.define("component/hotel/new-rooms-table/summary/rooms",function(e,t,o){_i_("a9a:7683f290");var a=e("component"),r=e("hotel/utils/rooms-selected-copy"),n=e("hotel/store");o.exports=a.extend({init:function(){_i_("a9a:a800b26a"),n.subscribe(function(){_i_("a9a:c83c1468");var e=n.getState().roomsTable.js_selection,t="hprt-reservation-total-price bui-price-display__value",o="",a="";0<e.roomCount?(0<e.totalPriceBeforeDiscount&&(o=' <div class="js-hp-rt-total-strikethrough bui-f-color-destructive prco-f-text-line-through prco-f-font-body prco-inline-block-maker-helper">'+e.totalPriceBeforeDiscountPretty+"</div>&nbsp;",t+=" prco-inline-block-maker-helper"),a="<div>"+o+'<div class="'+t+'">'+e.totalPriceFormatted+"</div></div>",this.$el.html(r(e.roomTypes,e.roomCount)+" "+a),this.$el.find(".hprt-reservation-total-price").one("mouseenter",function(){_i_("a9a:d24142d2"),B.et.goal("desktop_room_list_total_column_hover_over_price"),_r_()}),o&&this.$el.find(".js-hp-rt-total-strikethrough").one("mouseenter",function(){_i_("a9a:2a0c650c"),B.et.goal("desktop_room_list_total_column_hover_over_strikethrough"),_r_()}),this.$el.show()):this.$el.hide(),_r_()}.bind(this)),_r_()}}),_r_()}),B.define("component/hotel/new-rooms-table/highlighted-facilities",function(e,t,o){_i_("a9a:27039646");var a=e("component"),r=e("et");o.exports=a.extend({init:function(){_i_("a9a:3095e98d"),this.$otherFacilities=this.$el.find(".hprt-facilities-others"),this.$accessibleFacilities=this.$el.find(".hprt-accessible-facilities"),this.addEventListeners(),_r_()},addEventListeners:function(){_i_("a9a:52126e88");var o=this.$otherFacilities,t=this.$accessibleFacilities;this.$el.on("click","[data-toggler]",function(e){_i_("a9a:2e58d938"),e.preventDefault();var t=$(e.target);o.toggle("fast",function(){_i_("a9a:c4abb4cf"),o.is(":visible")?(r.goal("hp_room_facilities_more"),t.text(B.jstmpl.translations("hp_rt_info_collapse"))):(r.goal("hp_room_facilities_less"),t.text(B.jstmpl.translations("hp_rt_loc_more"))),_r_()}),_r_()}),this.$el.on("click","[data-toggler-accessibility]",function(e){_i_("a9a:6f884709"),e.preventDefault(),$(e.currentTarget).toggleClass("accordion-open",!t.is(":visible")),t.toggle("fast"),$(e.currentTarget).blur(),_r_()}),_r_()}}),_r_()}),B.define("component/hotel/new-rooms-table/unit-reviews",function(e,t,o){_i_("a9a:498f2634");var a=e("component"),r=e("et");o.exports=a.extend({init:function(){_i_("a9a:72cf34bd"),this.$unitScores=this.$el.find(".rt-unit-review-score"),this.addEventListeners(),_r_()},addEventListeners:function(){_i_("a9a:860e23f3");var t,e=this.$unitScores;this.$el.on("mouseenter",e,function(e){_i_("a9a:946cad78"),t=setTimeout(function(){_i_("a9a:5960d72e"),r.customGoal("OOFHFfZHQFLFESFDMfQLEHSYO",1),clearTimeout(t),_r_()},2e3),_r_()}),this.$el.on("mouseleave",e,function(e){_i_("a9a:6ed1c005"),clearTimeout(t),_r_()}),_r_()}}),_r_()}),B.define("component/hotel/new-rooms-table/select-error-tooltip",function(e,t,o){_i_("a9a:1d1a6f7f");var a=e("component"),r=e("jquery"),n=e("hotel/store"),_=e("hotel/redux/actionTypes");o.exports=a.extend({init:function(){_i_("a9a:c6dade78");var o=this.$el,a=r(".hprt-nos-select");o.attr("role","alert"),r("#hprt-form").submit(function(e){if(_i_("a9a:60172861"),!n.getState().roomsTable.js_selection.roomCount){e.preventDefault();var t=a.filter(function(e,t){return _i_("a9a:3b0d9f03"),_r_(60<t.getBoundingClientRect().top)}).get(0)||a.get(0);o.insertAfter(t),o.show().animate({opacity:1},600),r(".hprt-table-room-select").addClass("hprt-table-cell-select-error"),window.setTimeout(function(){_i_("a9a:f6e93812"),o.animate({opacity:0},600,function(){_i_("a9a:ae99e185"),o.hide(),_r_()}),_r_()},4e3),n.dispatch({type:_.SELECT_ROOM_ERROR}),r("select[name^='nr_rooms_']").attr("disabled",!1)}_r_()}),n.subscribe(function(){_i_("a9a:162f178a"),n.getState().roomsTable.js_selection.roomCount&&r(".hprt-table-cell-select-error").removeClass("hprt-table-cell-select-error"),_r_()}),_r_()}}),_r_()}),B.define("component/hotel/new-rooms-table/select-rooms",function(e,t,o){_i_("a9a:376cb52f");var a=e("component"),r=e("hotel/redux/actionTypes"),l=e("et"),c=e("hotel/store"),d=e("hotel/new-rooms-table/fit-status-helper"),h=e("jquery"),u=B.require("announce-to-screen-reader"),b=e("hotel/utils/rooms-selected-copy");o.exports=a.extend({init:function(){_i_("a9a:529e6aa4");var n=this.$el,_=n.data("room-id"),i=n.data("block-id"),s=n.parents("tr").find("td").not(":first");n.on("change",function(){var e;_i_("a9a:3946fe44"),e="1"===n.attr("data-is-fflex-selected")?n.attr("data-other-block-id"):n.attr("data-block-id"),c.dispatch({type:r.SELECT_ROOM,block_id:e,number_of_rooms:parseInt(n.val(),10),is_fflex_selected:n.attr("data-is-fflex-selected")}),1==B.env.b_is_group_search&&d.update();var t=c.getState().roomsTable.js_selection;u.announce(b(t.roomTypes,t.roomCount)+" "+t.totalPriceFormatted),s.find(".js-strikethrough-price").length&&l.goal("desktop_room_with_strikethrough_selected"),s.find(".c-deals-container").length&&l.goal("desktop_room_with_badge_selected"),_r_()}),c.subscribe(function(){_i_("a9a:a9aadfae");var e=c.getState().roomsTable.js_selection;0<e.roomCount?(l.goal("hp_room_select"),203==+B.env.b_acc_type&&l.goal("hp_hostel_room_select")):0<e.nrSelections&&(l.goal("hp_rt_room_deselect"),203==+B.env.b_acc_type&&l.goal("hp_rt_hostel_room_deselect")),i=n.attr("data-block-id");var t=e.blocks[i];t?(n.val(t.js_nr_selected),t.js_is_highlighted?s.addClass("hprt-block--room-selected"):s.removeClass("hprt-block--room-selected")):s.removeClass("hprt-block--room-selected");var o=e.rooms[_];if(o&&o.b_has_room_inventory){var a=parseInt(n.val(),10),r=parseInt(o.b_blocks[0].b_nr_stays,10)+a-e.roomCountPerRoomID[o.b_id];n.find("option").each(function(){_i_("a9a:3910e429"),h(this).prop("disabled",this.value>r),_r_()}),h(".js-group-recommendation-reserve-btn").attr("disabled",!0)}else n.find("option").each(function(){_i_("a9a:7e9fbdbc"),h(this).prop("disabled",!1),_r_()}),h(".js-group-recommendation-reserve-btn").attr("disabled",!1);_r_()}.bind(this)),_r_()}}),_r_()}),B.define("hotel/rooms-table",function(e){_i_("a9a:4b0e0075");var s=e("jquery"),l=e("hotel/store"),r=e("booking-sticker"),i=e("hotel/redux/actionTypes"),t=!1,n=!1;function o(){_i_("a9a:cfd21258");var e=new r,t=new r,o=new r,a={initialZIndex:180};B.env.b_hp_sticky_offset&&(a.initialOffset=B.env.b_hp_sticky_offset),B.events.once("fake-header-loaded",function(){_i_("a9a:9e0a1fba"),n||(n=!0,e.init(".hprt-table thead",".hprt-table",a),o.init(".fake-header.js-fake-header","#hprt-table",{noStacking:!0,initialZIndex:a.initialZIndex}),t.init(".js-hprt-reservation-summary > .reserve-block-js","#hprt-table",a)),_r_()}),_r_()}"hotel"===B.env.b_action&&B.env.b_bookings_owned&&B.env.b_rooms_available_and_soldout&&(0<s(".hprt-table tbody tr").length&&(o(),l.subscribe(function(){_i_("a9a:86af2c2c"),window.setTimeout(r.update,5),window.setTimeout(r.update,10),_r_()}),2===r.stickedElements.length&&(t=!0)),B.events.on("main-tab-opened",function(){_i_("a9a:8a28ab5f"),t||o(),_r_()})),e("hotel/rooms-table/reserve-button-tooltip"),e("hotel/rooms-table/filters/filters-handler"),s(".hprt-filter-button").click(function(e){_i_("a9a:735cd02e");var t=l.getState(),o=!1;s(this).hasClass("hprt-is-filter-clicked")?(s(this).removeClass("hprt-is-filter-clicked"),o=!0):s(this).addClass("hprt-is-filter-clicked");for(var a=0;a<t.roomsTable.rooms.length;a++)for(var r=t.roomsTable.rooms[a].b_blocks,n=0;n<r.length;n++)switch(s(this).attr("data-filter-type")){case"occupancy":s(this).attr("data-filter-value")!=r[n].b_max_persons&&s("[data-block-id='"+r[n].b_block_id+"']").each(function(e){_i_("a9a:bfc9090c"),o?s(this).find(".can-be-filtered").removeClass("hprt-greyout-occupancy"):s(this).find(".can-be-filtered").addClass("hprt-greyout-occupancy"),_r_()});break;case"meal":var _=s("#hprt-bundle-filter").attr("data-filters-applied")?s("#hprt-bundle-filter").attr("data-filters-applied").split(","):[];o?-1<(i=_.indexOf(s(this).attr("data-filter-value")))&&_.splice(i,1):_.includes(s(this).attr("data-filter-value"))||_.push(s(this).attr("data-filter-value")),0<_.length&&(!r[n].b_mealplan_included_name&&!_.includes("room")||r[n].b_mealplan_included_name&&!_.includes(r[n].b_mealplan_included_name))?s("[data-block-id='"+r[n].b_block_id+"']").each(function(e){_i_("a9a:bab5d2ba"),s(this).find(".can-be-filtered").addClass("hprt-greyout-meal"),_r_()}):s("[data-block-id='"+r[n].b_block_id+"']").each(function(e){_i_("a9a:4d016975"),s(this).find(".can-be-filtered").removeClass("hprt-greyout-meal"),_r_()}),s("#hprt-bundle-filter").attr("data-filters-applied",_.join());break;case"policy":var i;_=s("#hprt-bundle-filter").attr("data-policy-filters-applied")?s("#hprt-bundle-filter").attr("data-policy-filters-applied").split(","):[],o?-1<(i=_.indexOf(s(this).attr("data-filter-value")))&&_.splice(i,1):_.includes(s(this).attr("data-filter-value"))||_.push(s(this).attr("data-filter-value")),0<_.length&&("not_refundable_anymore"==r[n].b_cancellation_type&&!_.includes("non_refundable")||"not_refundable_anymore"!=r[n].b_cancellation_type&&!_.includes(r[n].b_cancellation_type))?s("[data-block-id='"+r[n].b_block_id+"']").each(function(e){_i_("a9a:37828a65"),s(this).find(".can-be-filtered").addClass("hprt-greyout-policy"),_r_()}):s("[data-block-id='"+r[n].b_block_id+"']").each(function(e){_i_("a9a:7aee62a9"),s(this).find(".can-be-filtered").removeClass("hprt-greyout-policy"),_r_()}),s("#hprt-bundle-filter").attr("data-policy-filters-applied",_.join())}_r_()}),s("#hprt-form").submit(function(e){var t;_i_("a9a:f1c43b8b");var o=l.getState();if(!o.roomsTable.js_selection.roomCount||!o.roomsTable.rooms)return _r_();t=[];for(var a=[],r=0;r<o.roomsTable.rooms.length;r++){if(!o.roomsTable.rooms[r].b_blocks)return _r_();for(var n=-1,_=0;_<o.roomsTable.rooms[r].b_blocks.length;_++)o.roomsTable.js_selection.blocks[o.roomsTable.rooms[r].b_blocks[_].b_block_id]&&(n=_);o.roomsTable.rooms[r].b_blocks.some(function(e){return _i_("a9a:3e86e245"),_r_(o.roomsTable.js_selection.blocks[e.b_block_id])})&&t.push(r+1),-1!=n&&a.push(n+1)}t.length&&s(this).find("input[name=rt_pos_selected]").val(t.join("_")),a.length&&s(this).find("input[name=rt_pos_selected_within_room]").val(a.join("_")),s("select[name^='nr_rooms_']").filter(function(){return _i_("a9a:f0558075"),_r_(0==s(this).val())}).attr("disabled",!0),l.dispatch({type:i.SUBMIT_FORM_WITH_ROOMS}),_r_()}),_r_()}),B.define("component/hotel/new-rooms-table/summary/genius-room-upgrade",function(e,t,o){_i_("a9a:69c9c2da");var a=e("component"),r=e("hotel/store");o.exports=a.extend({init:function(){_i_("a9a:f177a66f"),r.subscribe(function(){_i_("a9a:4659c403");var e=r.getState().roomsTable.js_selection,o=0,a=0;1<=e.roomCount?($.each(e.blocks,function(e,t){_i_("a9a:7e4b44ec"),t.b_genius_free_room_upgrade?o=1:a=1,_r_()}),o&&a?this.$el.html('<div class="urgency_message_red"><strong>'+B.jstmpl.translations("genius_free_room_upgrade_rt_multiple")+"</strong></div>"):this.$el.html("")):this.$el.html(""),_r_()}.bind(this)),_r_()}}),_r_()}),B.define("component/hotel/new-rooms-table/summary/free-taxi",function(_,e,t){_i_("a9a:894ab8af");var o=_("component");t.exports=o.extend({init:function(){_i_("a9a:7d46933e");var e=this.$el.data(),o=+e.ttv,t=e.currencyCode,a=B.env.b_selected_currency,r=B.debug("trips_promotions");if(isNaN(o)||"string"!=typeof t||t.length<1||t!==a)return r.log(["Nothing to see here.","ttv = "+o,"currencyCode = "+t,"pageCurrencyCode = "+a].join(" ")),_r_();var n=_("hotel/store");n.subscribe(function(){_i_("a9a:8e107fb2");var e=n.getState().roomsTable.js_selection,t=e.totalPrice;o<t&&!function(e){_i_("a9a:a704e78d");var t=e.blockIDs[0]||"";return _r_(/^bbasic_/i.test(t))}(e)&&1<e.roomCount?this.$el.children().css("display","block").attr("aria-hidden","false"):this.$el.children().css("display","none").attr("aria-hidden","true"),_r_()}.bind(this)),_r_()}}),_r_()}),B.define("hotel/rooms-table/filters/filters-handler",function(e){_i_("a9a:d84e3e2f");var n,_=e("jquery"),i=e("hotel/store"),s=e("hotel/redux/actionTypes"),l=!1,c=_("#hprt-table"),d="bui-u-hidden";i.subscribe(function(){_i_("a9a:9123e36a");var e=i.getState().roomsTable;if(s.UPDATE_BLOCKS_FILTERS===e.lastAction){n=c.find(".js-rt-block-row");var t=e.filters.matchingBlocksIds,o=Object.values(e.js_selection.roomIDs);if(!o||!t.length)return n.removeClass(d),_r_();if(o&&o.length){var a=o.reduce(function(e,t){return _i_("a9a:03bfd822"),_r_(e.concat(function(t){_i_("a9a:a28242b9");var e=i.getState().roomsTable.rooms;if(!e)return _r_();return _r_(e.filter(function(e){return _i_("a9a:0cac6c46"),_r_(e.b_id===Number(t))}).reduce(function(e,t){return _i_("a9a:1540a307"),_r_(e.concat(t.b_blocks.map(function(e){return _i_("a9a:903b79da"),_r_(e.b_block_id)})))},[]))}(t)))},[]);t=t.concat(a)}var r=n.filter(function(){_i_("a9a:42c6f2db");var e=_(this).data("block-id");return _r_(-1===t.indexOf(e))});n.filter(function(){_i_("a9a:8f7b7679");var e=_(this).data("block-id");return _r_(0<=t.indexOf(e))}).removeClass(d),r.addClass(d)}else s.CLEAR_BLOCKS_FILTERS===e.lastAction?(n=c.find(".js-rt-block-row")).removeClass(d):s.ADD_TPI_ROOMS===e.lastAction&&(l||(l=!0));_r_()}),_r_()}),booking.jstmpl("rooms_table_unit_type_filter",function(){_i_("a9a:2f7b7425");var i=['\n    <div>\n        <div class="bui-group bui-group--inline bui-group--large" role="group">\n        ',"\n            ",'\n            <div class="bui-form__group">\n               <label class="bui-checkbox">\n                 <input\n                    type="checkbox"\n                    class="bui-checkbox__input js-hprt-filter-option"\n                    value="','"\n                    ',"checked",'\n                 />\n                 <span class="bui-checkbox__label">\n                   ',"\n                       ","/roomtype/{fe_unit_type_id}/filter_name_generic","\n                   ","/roomtype/{fe_unit_type_id}/filter_name","\n                 </span>\n               </label>\n            </div>\n        ","\n        </div>\n        ",'\n            <div class="rt-filter__clear-filters-banner">\n                ',"/private/bh_gwe_pp_rt_unit_type_filter_clear_banner/name",'\n                <a href="#" id="js-hprt-filter-clear-btn">\n                    ',"/private/bh_gwe_pp_rt_unit_type_filter_clear_banner_cta/name","\n                </a>\n            </div>\n        ","\n    </div>\n"],s=["filter_options","fe_filter_value","fe_filter_checked","selected_filters_count"];return _r_(function(e){_i_("a9a:84ca04c2");var t="",o=this.fn;t+=i[0];var a=o.MC(s[0])||[];e.unshift({fe_filter_option:null});for(var r,n=1,_=a.length;n<=_;n++)e[0].fe_filter_option=r=a[n-1],t+=i[1],o.MN("fe_unit_type_id",o.MG((r||{}).room_type_id)),t+=i[1],o.MN("fe_filter_value",o.MG((r||{}).value)),t+=i[1],o.MN("fe_filter_checked",o.MG((r||{}).selected)),t+=[i[2],o.F.entities(o.MC(s[1])),i[3]].join(""),o.MD(s[2])&&(t+=i[4]),t+=i[5],o.MJ(o.MB(s[1])+""=="room")?t+=[i[6],o.ME(i[7],o.MB,o.MN,null),i[8]].join(""):t+=[i[6],o.ME(i[9],o.MB,o.MN,null),i[8]].join(""),t+=i[10];return e.shift(),t+=i[11],o.MJ(0<o.MB(s[3]))&&(t+=[i[12],o.ME(i[13],o.MB,o.MN,null),i[14],o.ME(i[15],o.MB,o.MN,null),i[16]].join("")),t+=i[17],_r_(t)})}()),B.define("component/hotel/rooms-table/filters/unit-type",function(e,t,o){_i_("a9a:594f04a1");var i=e("jquery"),s=e("hotel/store"),l=e("hotel/redux/actionTypes"),a=[0,20,36,10,9,23,8,24,7,4,13];function r(e){var t;_i_("a9a:dd339d4a");var o={};for(t=0;t<e.length;t++){var a=e[t],r=a.b_blocks,n=a.b_roomtype_id,_=n;if(c(n)&&(_="room"),void 0===o[_]&&(o[_]={name:"unit-type-"+_,value:_.toString(),room_type_id:n,blocksIds:[],num_units:0,selected:!1}),r&&r.length){for(var i,s=0;s<r.length;s++)(i=r[s]).b_block_id&&o[_].blocksIds.push(i.b_block_id);a.isAvailable&&(o[_].num_units+=r[0].b_nr_stays)}}var l=Object.values(o);return l.sort(function(e,t){return _i_("a9a:ade9267b"),_r_(t.num_units-e.num_units)}),_r_(l)}function c(e){if(_i_("a9a:573896b0"),null===e)return _r_(!0);return _r_(-1!==a.indexOf(e))}o.exports=e("component/reactive").extend({template:"rooms_table_unit_type_filter",initialState:{filter_options:[],selected_filters_count:0},initialize:function(){_i_("a9a:cf8a8dd6");var e=r(s.getState().roomsTable.rooms);this.setState({filter_options:e}),this.$el.on("change",".js-hprt-filter-option",this._handleFilterOptionChange.bind(this)),this.$el.on("click","#js-hprt-filter-clear-btn",this._handleClearFilterClicked.bind(this)),s.subscribe(this._onHotelPageStoreChange.bind(this)),_r_()},_onHotelPageStoreChange:function(){_i_("a9a:90c5f5fe");var e=s.getState().roomsTable;if(l.ADD_TPI_ROOMS===e.lastAction){var t=r(e.rooms);this.setState({filter_options:t})}_r_()},_handleFilterOptionChange:function(e){_i_("a9a:20bcc6c4");var t=i(e.target),o=t.val(),a=t.is(":checked"),r=[],n=[],_=this.getState().filter_options.map(function(e){return _i_("a9a:8ef33fa3"),e.value===o&&(e.selected=a),e.selected&&(r=r.concat(e.blocksIds),n.push(e.name)),_r_(e)});s.dispatch({type:l.UPDATE_BLOCKS_FILTERS,selectedFilters:n,matchingBlocksIds:r}),this.setState({filter_options:_,selected_filters_count:n.length}),_r_()},_handleClearFilterClicked:function(e){_i_("a9a:f8fad248"),e.preventDefault(),s.dispatch({type:l.CLEAR_BLOCKS_FILTERS});var t=r(s.getState().roomsTable.rooms);this.setState({filter_options:t,selected_filters_count:0}),_r_()}}),_r_()}),B.require("hotel/rooms-table"),_r_();